/*
  Modern, themeable base styles for the app
  - Light/Dark via system preference
  - Design tokens (colors, spacing, radius, shadows)
  - Cards, responsive list grid, badges, buttons, skeletons
*/

/* Design tokens */
:root {
  /* Typography */
  --font-sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  --leading: 1.6;

  /* Spacing scale */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-8: 32px;
  --space-10: 40px;

  /* Radii */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;

  /* Easing + durations */
  --ease: cubic-bezier(0.2, 0.7, 0.2, 1);
  --dur-fast: 120ms;
  --dur-med: 200ms;

  /* Color tokens (light default) */
  --bg: #ffffff;
  --surface: #ffffff;
  --surface-2: #f8fafc; /* subtle cards/rows */
  --text: #0f172a;      /* slate-900 */
  --muted: #64748b;     /* slate-500 */
  --border: #e2e8f0;    /* slate-200 */
  --primary: #2563eb;   /* blue-600 */
  --primary-ink: #ffffff;
  --accent: #14b8a6;    /* teal-500 */
  --error: #ef4444;     /* red-500 */

  /* Shadows */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.06), 0 1px 1px rgba(0, 0, 0, 0.04);
  --shadow-md: 0 6px 18px rgba(15, 23, 42, 0.08);
  --shadow-lg: 0 12px 32px rgba(15, 23, 42, 0.12);

  /* Derived tokens */
  --ring: color-mix(in oklab, var(--primary) 40%, transparent);
  --pill-bg: color-mix(in oklab, var(--text) 6%, transparent);
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0b0e14;      /* deep neutral */
    --surface: #121826;  /* card */
    --surface-2: #0f1623;/* list background */
    --text: #e6e6e6;
    --muted: #9aa4b2;
    --border: #1f2937;
    --primary: #7ab7ff;  /* light blue links from original */
    --primary-ink: #0b0e14;
    --accent: #22d3ee;   /* cyan-400 */
    --error: #ff6b6b;
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.4), 0 1px 1px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.35);
    --shadow-lg: 0 16px 40px rgba(0, 0, 0, 0.45);
    --ring: color-mix(in oklab, var(--primary) 50%, transparent);
    --pill-bg: rgba(255, 255, 255, 0.06);
  }
}

/* Base */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: var(--font-sans);
  line-height: var(--leading);
  background: var(--bg);
  color: var(--text);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

a {
  color: var(--primary);
  text-decoration: underline;
  text-underline-offset: 2px;
  transition: color var(--dur-med) var(--ease), text-underline-offset var(--dur-fast) var(--ease);
}
a:hover { text-underline-offset: 4px; }
a:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px var(--ring);
  border-radius: 6px;
}

h1, h2, h3 {
  line-height: 1.25;
  margin: 0 0 var(--space-3);
  letter-spacing: -0.01em;
}
h1 { font-size: clamp(26px, 3vw, 34px); font-weight: 700; }
h2 { font-size: clamp(20px, 2.2vw, 24px); font-weight: 650; }
h3 { font-size: 18px; font-weight: 600; }

p { margin: 0 0 var(--space-3); }

/* Layout */
.container {
  max-width: 1000px;
  margin: var(--space-8) auto;
  padding: 0 var(--space-4);
}

.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3);
  padding-bottom: var(--space-3);
  margin-bottom: var(--space-4);
  border-bottom: 1px solid var(--border);
}

.section { margin-top: var(--space-6); }

/* List/grid */
.list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: grid;
  gap: var(--space-3);
  grid-template-columns: 1fr;
}
@media (min-width: 700px) {
  .list { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (min-width: 1060px) {
  .list { grid-template-columns: repeat(3, minmax(0, 1fr)); }
}

/* Cards */
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  padding: var(--space-4) var(--space-4);
  box-shadow: var(--shadow-sm);
  transition: transform var(--dur-med) var(--ease), box-shadow var(--dur-med) var(--ease), border-color var(--dur-med) var(--ease);
  will-change: transform, box-shadow;
}
.card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}
.card:focus-within {
  border-color: color-mix(in oklab, var(--primary) 50%, var(--border));
  box-shadow: 0 0 0 3px var(--ring), var(--shadow-sm);
}

.card-title {
  font-weight: 650;
  margin-bottom: var(--space-2);
  font-size: 16px;
}
.card-title a { text-decoration: none; }
.card-title a:hover { text-decoration: underline; text-underline-offset: 3px; }

.card-meta {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: var(--space-3);
  color: var(--muted);
  font-size: 14px;
}

.meta {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: var(--space-3);
  color: var(--muted);
  margin: var(--space-2) 0 var(--space-4);
  font-size: 14px;
}

/* Text helpers */
.muted { color: var(--muted); }
.error { color: var(--error); }

/* Badges */
.pill {
  display: inline-flex;
  align-items: center;
  height: 26px;
  padding: 0 var(--space-3);
  border-radius: 999px;
  background: var(--pill-bg);
  border: 1px solid var(--border);
  color: color-mix(in oklab, var(--text) 85%, transparent);
  font-size: 12px;
  letter-spacing: 0.02em;
  white-space: nowrap;
}
.pill--positive { background: color-mix(in oklab, #10b981 20%, transparent); border-color: color-mix(in oklab, #10b981 35%, var(--border)); }
.pill--neutral  { background: color-mix(in oklab, #64748b 20%, transparent); border-color: color-mix(in oklab, #64748b 35%, var(--border)); }
.pill--negative { background: color-mix(in oklab, #ef4444 20%, transparent); border-color: color-mix(in oklab, #ef4444 35%, var(--border)); }

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  height: 36px;
  padding: 0 var(--space-4);
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  background: var(--surface-2);
  color: var(--text);
  text-decoration: none;
  cursor: pointer;
  transition: background var(--dur-med) var(--ease), box-shadow var(--dur-med) var(--ease), transform var(--dur-med) var(--ease), border-color var(--dur-med) var(--ease);
}
.btn:hover { transform: translateY(-1px); box-shadow: var(--shadow-sm); }
.btn:active { transform: translateY(0); }
.btn:focus-visible { outline: none; box-shadow: 0 0 0 3px var(--ring); }

.btn-primary {
  background: var(--primary);
  color: var(--primary-ink);
  border-color: color-mix(in oklab, var(--primary) 50%, var(--border));
}
.btn-primary:hover { box-shadow: var(--shadow-md); }

/* Scrollbar (subtle) */
/* WebKit */
*::-webkit-scrollbar { width: 10px; height: 10px; }
*::-webkit-scrollbar-track { background: transparent; }
*::-webkit-scrollbar-thumb {
  background-color: color-mix(in oklab, var(--text) 12%, transparent);
  border-radius: 10px;
  border: 3px solid transparent;
  background-clip: content-box;
}
/* Firefox */
* { scrollbar-color: color-mix(in oklab, var(--text) 12%, transparent) transparent; scrollbar-width: thin; }

/* Skeleton loaders */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
.skeleton {
  position: relative;
  overflow: hidden;
  background: linear-gradient(90deg,
    color-mix(in oklab, var(--text) 6%, transparent) 25%,
    color-mix(in oklab, var(--text) 12%, transparent) 37%,
    color-mix(in oklab, var(--text) 6%, transparent) 63%
  );
  background-size: 400% 100%;
  border-radius: var(--radius-sm);
  animation: shimmer 1.6s var(--ease) infinite;
}
.skeleton--text { height: 1em; }
.skeleton--rounded { border-radius: 999px; }
.skeleton-card {
  border-radius: var(--radius-md);
  height: 120px;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition: none !important; }
}
